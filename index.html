<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã¾ã‚‹ç½°ã‚²ãƒ¼ãƒ ï¼ˆ3ç›®ä¸¦ã¹ï¼‰</title>
  <style>
    /* ==== å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ ==== */
    body {
      font-family: "Yu Gothic", "Hiragino Kaku Gothic ProN", sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      background: linear-gradient(180deg, #f3f6fc, #dde7f7);
    }

    h1 {
      color: #333;
      margin-bottom: 20px;
    }

    /* ==== ã‚²ãƒ¼ãƒ ãƒœãƒ¼ãƒ‰ ==== */
    .board {
      display: grid;
      grid-template-columns: repeat(3, 100px);
      grid-template-rows: repeat(3, 100px);
      gap: 5px;
    }

    .cell {
      background: white;
      border: 2px solid #333;
      font-size: 2.5em;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.2s;
    }

    .cell:hover {
      background: #f0f8ff;
    }

    /* ==== ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º ==== */
    .status {
      margin-top: 20px;
      font-size: 1.2em;
      height: 1.5em;
    }

    /* ==== ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ ==== */
    .reset-btn {
      margin-top: 15px;
      padding: 10px 20px;
      font-size: 1em;
      background-color: #4caf50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.2s;
    }

    .reset-btn:hover {
      background-color: #45a049;
    }

  </style>
</head>
<body>
  <h1>ã¾ã‚‹ç½°ã‚²ãƒ¼ãƒ ï¼ˆ3ç›®ä¸¦ã¹ï¼‰</h1>
  
  <!-- ã‚²ãƒ¼ãƒ ç›¤ -->
  <div class="board" id="board">
    <!-- 9ãƒã‚¹ã‚’JSã§ç”Ÿæˆã—ã¦ã‚‚ã‚ˆã„ãŒã€æ‰‹å‹•ã§ç½®ã„ã¦ã‚‚OK -->
    <div class="cell" data-index="0"></div>
    <div class="cell" data-index="1"></div>
    <div class="cell" data-index="2"></div>
    <div class="cell" data-index="3"></div>
    <div class="cell" data-index="4"></div>
    <div class="cell" data-index="5"></div>
    <div class="cell" data-index="6"></div>
    <div class="cell" data-index="7"></div>
    <div class="cell" data-index="8"></div>
  </div>

  <!-- å‹æ•—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
  <div class="status" id="status"></div>

  <!-- ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ -->
  <button class="reset-btn" id="resetBtn">ãƒªã‚»ãƒƒãƒˆ</button>

  <script>
    /* 
      ==== ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯ ====
      X = ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼1ï¼ˆã¾ã‚‹ï¼‰
      O = ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼2ï¼ˆã°ã¤ï¼‰
      äº¤äº’ã«ã‚¯ãƒªãƒƒã‚¯ã—ã¦é€²è¡Œ
    */

    const board = document.getElementById('board');
    const cells = document.querySelectorAll('.cell');
    const status = document.getElementById('status');
    const resetBtn = document.getElementById('resetBtn');

    // ç¾åœ¨ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ ("ã€‡" ã¾ãŸã¯ "Ã—")
    let currentPlayer = "ã€‡";
    // ç›¤é¢ã®çŠ¶æ…‹ï¼ˆ9ãƒã‚¹ï¼‰
    let boardState = Array(9).fill(null);
    // ã‚²ãƒ¼ãƒ çµ‚äº†ãƒ•ãƒ©ã‚°
    let gameOver = false;

    // å‹åˆ©ãƒ‘ã‚¿ãƒ¼ãƒ³ã®çµ„ã¿åˆã‚ã›
    const winPatterns = [
      [0,1,2],
      [3,4,5],
      [6,7,8],
      [0,3,6],
      [1,4,7],
      [2,5,8],
      [0,4,8],
      [2,4,6]
    ];

    // ã‚»ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã®å‡¦ç†
    function handleCellClick(e) {
      const index = e.target.dataset.index;

      // ã™ã§ã«åŸ‹ã¾ã£ã¦ã„ã‚‹ or çµ‚äº†å¾Œã¯ä½•ã‚‚ã—ãªã„
      if (boardState[index] || gameOver) return;

      // ç¾åœ¨ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å°ã‚’ãƒã‚¹ã«å…¥ã‚Œã‚‹
      boardState[index] = currentPlayer;
      e.target.textContent = currentPlayer;

      // å‹æ•—åˆ¤å®š
      if (checkWin(currentPlayer)) {
        status.textContent = `ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€Œ${currentPlayer}ã€ã®å‹ã¡ï¼ğŸ‰`;
        gameOver = true;
        highlightWinningCells(currentPlayer);
        return;
      }

      // å¼•ãåˆ†ã‘åˆ¤å®šï¼ˆå…¨ãƒã‚¹åŸ‹ã¾ã£ã¦ã„ã‚‹ï¼‰
      if (!boardState.includes(null)) {
        status.textContent = "å¼•ãåˆ†ã‘ã§ã™ğŸ¤";
        gameOver = true;
        return;
      }

      // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼äº¤ä»£
      currentPlayer = currentPlayer === "ã€‡" ? "Ã—" : "ã€‡";
      status.textContent = `ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€Œ${currentPlayer}ã€ã®ç•ªã§ã™`;
    }

    // å‹åˆ©åˆ¤å®š
    function checkWin(player) {
      return winPatterns.some(pattern => 
        pattern.every(index => boardState[index] === player)
      );
    }

    // å‹ã¡ãƒ©ã‚¤ãƒ³ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
    function highlightWinningCells(player) {
      winPatterns.forEach(pattern => {
        if (pattern.every(index => boardState[index] === player)) {
          pattern.forEach(i => {
            cells[i].style.background = "#d4edda"; // ç·‘ã£ã½ã„ãƒã‚¤ãƒ©ã‚¤ãƒˆ
          });
        }
      });
    }

    // ã‚²ãƒ¼ãƒ ã‚’ãƒªã‚»ãƒƒãƒˆ
    function resetGame() {
      boardState.fill(null);
      cells.forEach(cell => {
        cell.textContent = "";
        cell.style.background = "white";
      });
      currentPlayer = "ã€‡";
      gameOver = false;
      status.textContent = `ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€Œ${currentPlayer}ã€ã®ç•ªã§ã™`;
    }

    // ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²
    cells.forEach(cell => cell.addEventListener('click', handleCellClick));
    resetBtn.addEventListener('click', resetGame);

    // åˆæœŸè¡¨ç¤º
    status.textContent = `ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã€Œ${currentPlayer}ã€ã®ç•ªã§ã™`;
  </script>
</body>
</html>
